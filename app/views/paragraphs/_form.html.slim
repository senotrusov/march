
= form.fields_for :paragraphs, paragraph, :index => "" do |f|
  .paragraph
    = f.hidden_field :is_instance

    .abstract
    
    h3
      | Â¶ paragraph
      .buttons
        .delete_form_item data-selector=".paragraph"
          i.icon-remove-sign

    - if paragraph.errors.any?
      .error_explanation
        h2 = "#{pluralize(paragraph.errors.count, "error")} prohibited this paragraph from being saved:"
        ul
          - paragraph.errors.full_messages.each do |message|
            li = message
    
    .field
      - if paragraph.image?
        p
          = image_tag paragraph.image_url(:normal), alt: nil
          = f.hidden_field :image_cache

        p
          = f.check_box :remove_image, {}, "1", nil
          = f.label :remove_image

      - else
          = f.label :image
          = f.file_field :image

    .field
      = f.label :title
      = f.text_field :title

    .field
      = f.label :message
      = f.text_area :message

    .field
      = f.label :location
      table.field_with_button
        tbody
          tr
            td.field
              = f.text_field :location, 'data-show-map' => false, 'data-force-locate' => false
            td
              .zoom_field
                i.icon-large.icon-zoom-in
                = f.text_field :zoom, :readonly => true
            td
              .button.locate
                i.icon-map-marker
                .title Locate

    .field
      = f.label :url
      = f.text_field :url


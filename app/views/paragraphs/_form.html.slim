
= form.fields_for :paragraphs, paragraph, :index => "" do |f|
  .paragraph_form
    = f.hidden_field :is_instance

    .abstract
    
    h3.form-title
      - if paragraph.new_record?
        | New ¶
        .buttons
          .delete_form_item data-selector=".paragraph_form"
            i.icon-remove-sign

      - else
        | Editing ¶#{@paragraph.id}
        .buttons
          .discard-edit-paragraph-button
            i.icon-undo

    - if paragraph.errors.any?
      .error_explanation
        h2 = "#{pluralize(paragraph.errors.count, "error")} prohibited this paragraph from being saved:"
        ul
          - paragraph.errors.full_messages.each do |message|
            li = message
    
    .field
      - if paragraph.image?
        p
          = image_tag paragraph.image_url(:normal), alt: nil
          = f.hidden_field :image_cache

        p
          = f.check_box :remove_image, {}, "1", nil
          = f.label :remove_image

      - else
          = f.file_field :image

    .field
      .textarea_controls

        .button.quote
          i.icon-comments-alt
          .title Quote

        .button.link
          i.icon-link
          .title Link

      = f.text_area :message

    .field
      table.field_with_button
        tbody
          tr
            td.wide
              = f.text_field :location, 'data-show-map' => false, 'data-force-locate' => false
            td
              .zoom_field
                i.icon-large.icon-zoom-in
                = f.text_field :zoom, :readonly => true
            td
              .button.locate
                i.icon-map-marker
                .title Locate
